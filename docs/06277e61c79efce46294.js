(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{405:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projects__item"},[t._m(0),a("div",{staticClass:"pojects__item-edit"},[t.chooseImage?a("div",{staticClass:"projects__add-img"},[a("label",{staticClass:"pojects__item-photo",style:{backgroundImage:t.projectPhotoUrl}}),a("label",[a("a",{staticClass:"pojects__item-photo-change"},[t._v("Изменить превью")]),a("input",{staticClass:"pojects__item-photo-fake-input",attrs:{type:"file",accept:"image/jpeg"},on:{change:function(e){return e.preventDefault(),t.addProjectFile(e)}}})])]):a("div",{staticClass:"projects__add-img"},[a("label",{staticClass:"pojects__item-photo"},[a("div",{staticClass:"projects__item-photo-text"},[t._v("Перетащите или загрузите для загрузки изображения")]),a("a",{staticClass:"pojects__item-photo-upload"},[t._v("Загрузить")]),a("input",{staticClass:"pojects__item-photo-fake-input",attrs:{type:"file",accept:"image/jpeg"},on:{change:function(e){return e.preventDefault(),t.addProjectFile(e)}}})])]),a("form",{staticClass:"projects__item-content"},[a("label",{staticClass:"projects__item-content-label"},[a("div",{staticClass:"projects__item-content-label-title"},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addProjectData.title,expression:"addProjectData.title"}],staticClass:"projects__item-content-input",attrs:{type:"text"},domProps:{value:t.addProjectData.title},on:{input:function(e){e.target.composing||t.$set(t.addProjectData,"title",e.target.value)}}})]),a("label",{staticClass:"projects__item-content-label"},[t._v("Ссылка"),a("div",{staticClass:"projects__item-content-label-title"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addProjectData.link,expression:"addProjectData.link"}],staticClass:"projects__item-content-input",attrs:{type:"text"},domProps:{value:t.addProjectData.link},on:{input:function(e){e.target.composing||t.$set(t.addProjectData,"link",e.target.value)}}})]),a("label",{staticClass:"projects__item-content-label"},[t._v("Описание"),a("div",{staticClass:"projects__item-content-label-title"}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addProjectData.description,expression:"addProjectData.description"}],staticClass:"projects__item-content-textarea",attrs:{name:"projectContent",cols:"30",rows:"10"},domProps:{value:t.addProjectData.description},on:{input:function(e){e.target.composing||t.$set(t.addProjectData,"description",e.target.value)}}})]),a("label",{staticClass:"projects__item-content-label"},[a("div",{staticClass:"projects__item-content-label-title"},[t._v("Добавление тэгов")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addProjectData.techs,expression:"addProjectData.techs"}],staticClass:"projects__item-content-input",attrs:{type:"text",placeholder:"Введите тэги через запятую"},domProps:{value:t.addProjectData.techs},on:{input:function(e){e.target.composing||t.$set(t.addProjectData,"techs",e.target.value)}}})]),a("div",{staticClass:"projects__item-content-btn-wrap"},[a("button",{staticClass:"projects__item-content-btn-decline",attrs:{type:"button"},on:{click:function(e){return t.$emit("cancelItem")}}},[t._v("Отмена")]),a("button",{staticClass:"projects__item-content-btn-save",attrs:{type:"button"},on:{click:t.addNewProject}},[t._v("Загрузить")])])])])])};s._withStripped=!0;a(55);var o=a(15);var c={data:()=>({chooseImage:!1,renderedPhoto:"",addProjectData:{title:"",techs:"",photo:"",link:"",description:""}}),computed:{projectPhotoUrl(){return`url(${this.renderedPhoto})`}},methods:{async addProjectFile(t){const e=t.target.files[0];this.addProjectData.photo=e;try{const t=await(t=>{const e=new FileReader;return new Promise((a,s)=>{try{e.readAsDataURL(t),e.onloadend=(()=>{a(e.result)})}catch(t){throw new Error("Ошибка при чтении файла")}})})(e);this.renderedPhoto=t,this.chooseImage=!0}catch(t){this.showTooltip({type:"error",text:t.message})}},...Object(o.b)("projects",["addProject"]),async addNewProject(){const t=new FormData;t.append("title",this.addProjectData.title),t.append("techs",this.addProjectData.techs),t.append("photo",this.addProjectData.photo),t.append("link",this.addProjectData.link),t.append("description",this.addProjectData.description),console.log(t);try{this.addProject(t),this.$emit("cancelItem")}catch(t){}}}},i=a(10),n=Object(i.a)(c,s,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"projects__item-row"},[e("h4",{staticClass:"projects__item-title"},[this._v("Добавление работы")])])}],!1,null,null,null);n.options.__file="src/admin/components/addProject.vue";e.default=n.exports}}]);